import{f as R,p as _a,b as ma}from"../chunks/B-5l9VD0.js";import{d as fa,f as p,a as d,c as ua,e as Te,r as Ge}from"../chunks/DHhKP1ZB.js";import{p as ya,a as $,b as ba,o as ha,c as ka,s as f,g as e,w as E,f as s,i as a,j as ne,k as r,l as b,v as xa}from"../chunks/Bub3oN-q.js";import{s as g}from"../chunks/BvDuh9Sl.js";import{i as h}from"../chunks/Dt9r8Ad9.js";import{e as Pa,s as Me,i as wa}from"../chunks/D2Qmw1Ht.js";import{s as S}from"../chunks/IihZ9c6f.js";import{s as Oe}from"../chunks/DWhOTJc_.js";import{s as $a,a as Sa}from"../chunks/BkMhuQvl.js";import{b as U}from"../chunks/CAxi6s8j.js";const ja=()=>{try{const C=[R.join(process.cwd(),"..","api","games.json"),R.join(process.cwd(),"static","api","games.json"),R.join(process.cwd(),"..","..","api","games.json")];let B=null;for(const k of C)if(R.existsSync(k)){console.log(`Loading games from: ${k}`),B=JSON.parse(R.readFileSync(k,"utf8"));break}if(!B)return console.warn("No games data found for prerendering game pages"),[];const z=B.games||[];return console.log(`Found ${z.length} games for prerendering`),z.map(k=>({appid:String(k.appid)}))}catch(C){return console.error("Error generating game entries:",C),[]}},Aa=!0,Fa="always",Ya=Object.freeze(Object.defineProperty({__proto__:null,entries:ja,prerender:Aa,trailingSlash:Fa},Symbol.toStringTag,{value:"Module"}));var Na=p('<div class="loading svelte-1ypl9g2">Loading game details...</div>'),Da=p('<div class="error card svelte-1ypl9g2"><h2 class="svelte-1ypl9g2">Game not found</h2> <p> </p> <a class="button svelte-1ypl9g2">‚Üê Back to Games</a></div>'),Ca=p('<div class="stat svelte-1ypl9g2"><span class="label svelte-1ypl9g2">Last Played</span> <span class="value svelte-1ypl9g2"> </span></div>'),Ba=p('<p class="description svelte-1ypl9g2"> </p>'),La=p('<p class="unlock-date svelte-1ypl9g2"> </p>'),Ta=p('<div class="check-mark svelte-1ypl9g2">‚úì</div>'),Ga=p('<div class="global-percent"><div class="percent-value svelte-1ypl9g2"> </div> <div class="percent-label svelte-1ypl9g2">of players unlocked</div></div> <div class="rarity-bar svelte-1ypl9g2"><div></div></div>',1),Ma=p('<div class="no-data svelte-1ypl9g2">Global statistics unavailable</div>'),Oa=p('<div role="button" tabindex="0"><div class="flip-card-inner svelte-1ypl9g2"><div class="flip-card-front svelte-1ypl9g2"><div class="achievement-icon svelte-1ypl9g2"><img loading="lazy" class="svelte-1ypl9g2"/></div> <div class="achievement-info svelte-1ypl9g2"><h3 class="svelte-1ypl9g2"> </h3> <!> <!></div> <!></div> <div class="flip-card-back svelte-1ypl9g2"><div class="global-stats svelte-1ypl9g2"><!></div></div></div></div>'),Ra=p('<div class="achievements-section svelte-1ypl9g2"><div class="achievements-header card svelte-1ypl9g2"><h2 class="svelte-1ypl9g2">üèÜ Achievements</h2> <div class="progress-bar svelte-1ypl9g2"><div class="progress-fill svelte-1ypl9g2"></div></div> <p class="progress-text svelte-1ypl9g2"> </p> <div class="achievement-controls svelte-1ypl9g2"><button class="control-button svelte-1ypl9g2"> </button> <div class="sort-control svelte-1ypl9g2"><label for="achievement-sort" class="svelte-1ypl9g2">Sort by:</label> <select id="achievement-sort" class="sort-select svelte-1ypl9g2"><option>Unlock Date</option><option>Name (A-Z)</option><option>Rarity (Rarest First)</option></select></div></div></div> <div class="achievements-grid svelte-1ypl9g2"></div></div>'),Ea=p(`<div class="no-achievements card svelte-1ypl9g2"><p>This game doesn't have achievements or achievement data is not available.</p></div>`),Ua=p('<div class="game-header svelte-1ypl9g2"><div class="cover-large svelte-1ypl9g2"><img class="svelte-1ypl9g2"/></div> <div class="game-info card svelte-1ypl9g2"><h1 class="svelte-1ypl9g2"> </h1> <div class="stats svelte-1ypl9g2"><div class="stat svelte-1ypl9g2"><span class="label svelte-1ypl9g2">Total Playtime</span> <span class="value svelte-1ypl9g2"> </span></div> <!> <div class="stat svelte-1ypl9g2"><span class="label svelte-1ypl9g2">App ID</span> <span class="value svelte-1ypl9g2"> </span></div></div> <div class="actions svelte-1ypl9g2"><a target="_blank" class="button svelte-1ypl9g2">View on Steam Store</a></div></div></div> <!> <div class="back-link svelte-1ypl9g2"><a class="button svelte-1ypl9g2">‚Üê Back to Games</a></div>',1),za=p('<div class="game-container svelte-1ypl9g2"><!></div>');function es(C,B){ya(B,!0);const z=()=>Sa(_a,"$page",k),[k,Re]=$a();let _=$(null),y=$(null),H=$(!0),K=$(""),m=$(ba(new Set)),L=$("unlock-date"),I=$(!1),de=E(()=>z().params.appid);function ce(t){e(m).has(t)?e(m).delete(t):e(m).add(t),f(m,new Set(e(m)),!0)}function Ee(){e(I)?(e(m).clear(),f(I,!1)):(e(y)?.achievements&&e(y).achievements.forEach(t=>{e(m).add(t.apiname)}),f(I,!0)),f(m,new Set(e(m)),!0)}let Ue=E(()=>{if(!e(y)?.achievements)return[];const t=[...e(y).achievements];return e(L)==="unlock-date"?t.sort((v,c)=>v.achieved===c.achieved?(c.unlocktime||0)-(v.unlocktime||0):c.achieved-v.achieved):e(L)==="name"?t.sort((v,c)=>{const x=v.displayName||v.name||v.apiname||"",T=c.displayName||c.name||c.apiname||"";return x.localeCompare(T)}):e(L)==="global-percent"&&t.sort((v,c)=>{const x=v.globalPercent??100,T=c.globalPercent??100;return x-T}),t});ha(async()=>{try{const t=await fetch(`${U}/api/games.json`);if(t.ok){const c=await t.json();f(_,c.games.find(x=>String(x.appid)===e(de)),!0)}const v=await fetch(`${U}/history/achievements/${e(de)}.json`);v.ok&&f(y,await v.json(),!0),f(H,!1)}catch{f(K,"Failed to load game data"),f(H,!1)}});function ze(t){const v=Math.round(t/60);return v<1?`${t} minutes`:`${v.toLocaleString()} hours`}function pe(t){return t?new Date(t*1e3).toLocaleDateString():"Never"}let ge=E(()=>e(y)?.achievements?.filter(t=>t.achieved===1).length||0),J=E(()=>e(y)?.achievements?.length||0),_e=E(()=>e(J)>0?e(ge)/e(J)*100:0);var Q=za(),Ie=s(Q);{var Je=t=>{var v=Na();d(t,v)},Ve=t=>{var v=ua(),c=ne(v);{var x=j=>{var A=Da(),P=r(s(A),2),G=s(P,!0);a(P);var F=r(P,2);a(A),b(()=>{g(G,e(K)||"Unable to load game details"),S(F,"href",`${U??""}/games/1/`)}),d(j,A)},T=j=>{var A=Ua(),P=ne(A),G=s(P),F=s(G);a(G);var me=r(G,2),W=s(me),Ze=s(W,!0);a(W);var X=r(W,2),Y=s(X),fe=r(s(Y),2),qe=s(fe);a(fe),a(Y);var ue=r(Y,2);{var He=o=>{var u=Ca(),N=r(s(u),2),M=s(N);a(N),a(u),b(ee=>g(M,`üìÖ ${ee??""}`),[()=>pe(e(_).rtime_last_played)]),d(o,u)};h(ue,o=>{e(_).rtime_last_played&&o(He)})}var ye=r(ue,2),be=r(s(ye),2),Ke=s(be,!0);a(be),a(ye),a(X);var he=r(X,2),Qe=s(he);a(he),a(me),a(P);var ke=r(P,2);{var We=o=>{var u=Ra(),N=s(u),M=r(s(N),2),ee=s(M);a(M);var ae=r(M,2),ea=s(ae);a(ae);var Pe=r(ae,2),V=s(Pe);V.__click=Ee;var aa=s(V,!0);a(V);var we=r(V,2),se=r(s(we),2),te=s(se);te.value=te.__value="unlock-date";var le=r(te);le.value=le.__value="name";var $e=r(le);$e.value=$e.__value="global-percent",a(se),a(we),a(Pe),a(N);var Se=r(N,2);Pa(Se,21,()=>e(Ue),wa,(O,l)=>{var D=Oa();let je;D.__click=()=>ce(e(l).apiname),D.__keydown=i=>i.key==="Enter"&&ce(e(l).apiname);var Ae=s(D),re=s(Ae),ie=s(re),Z=s(ie);a(ie);var ve=r(ie,2),oe=s(ve),sa=s(oe,!0);a(oe);var Fe=r(oe,2);{var ta=i=>{var n=Ba(),w=s(n,!0);a(n),b(()=>g(w,e(l).description)),d(i,n)};h(Fe,i=>{e(l).description&&i(ta)})}var la=r(Fe,2);{var ra=i=>{var n=La(),w=s(n);a(n),b(q=>g(w,`Unlocked: ${q??""}`),[()=>pe(e(l).unlocktime)]),d(i,n)};h(la,i=>{e(l).achieved===1&&e(l).unlocktime&&i(ra)})}a(ve);var ia=r(ve,2);{var va=i=>{var n=Ta();d(i,n)};h(ia,i=>{e(l).achieved===1&&i(va)})}a(re);var Ne=r(re,2),De=s(Ne),oa=s(De);{var na=i=>{var n=Ga(),w=ne(n),q=s(w),ca=s(q);a(q),xa(2),a(w);var Ce=r(w,2),Be=s(Ce);let Le;a(Ce),b((pa,ga)=>{g(ca,`${pa??""}%`),Le=Oe(Be,1,"rarity-fill svelte-1ypl9g2",null,Le,{common:e(l).globalPercent>=50,uncommon:e(l).globalPercent>=25&&e(l).globalPercent<50,rare:e(l).globalPercent>=10&&e(l).globalPercent<25,epic:e(l).globalPercent>=5&&e(l).globalPercent<10,legendary:e(l).globalPercent<5}),Me(Be,`width: ${ga??""}%`)},[()=>e(l).globalPercent.toFixed(1),()=>Math.min(e(l).globalPercent,100)]),d(i,n)},da=i=>{var n=Ma();d(i,n)};h(oa,i=>{e(l).globalPercent!==null&&e(l).globalPercent!==void 0?i(na):i(da,!1)})}a(De),a(Ne),a(Ae),a(D),b(i=>{je=Oe(D,1,"achievement-item card svelte-1ypl9g2",null,je,i),S(Z,"src",e(l).icon),S(Z,"alt",e(l).displayName||e(l).apiname),g(sa,e(l).displayName||e(l).name||e(l).apiname)},[()=>({achieved:e(l).achieved===1,flipped:e(m).has(e(l).apiname)})]),Te("error",Z,i=>i.currentTarget.style.display="none"),Ge(Z),d(O,D)}),a(Se),a(u),b(O=>{Me(ee,`width: ${e(_e)??""}%`),g(ea,`${e(ge)??""} / ${e(J)??""} (${O??""}%)`),g(aa,e(I)?"üîÑ Flip All Back":"üîÑ Flip All Cards")},[()=>e(_e).toFixed(1)]),ma(se,()=>e(L),O=>f(L,O)),d(o,u)},Xe=o=>{var u=Ea();d(o,u)};h(ke,o=>{e(y)&&e(J)>0?o(We):o(Xe,!1)})}var xe=r(ke,2),Ye=s(xe);a(xe),b(o=>{S(F,"src",`${U??""}/covers/${e(_).appid??""}.jpg`),S(F,"alt",e(_).name),g(Ze,e(_).name),g(qe,`‚è±Ô∏è ${o??""}`),g(Ke,e(_).appid),S(Qe,"href",`https://store.steampowered.com/app/${e(_).appid??""}/`),S(Ye,"href",`${U??""}/games/1/`)},[()=>ze(e(_).playtime_forever||0)]),Te("error",F,o=>o.currentTarget.style.display="none"),Ge(F),d(j,A)};h(c,j=>{e(K)||!e(_)?j(x):j(T,!1)},!0)}d(t,v)};h(Ie,t=>{e(H)?t(Je):t(Ve,!1)})}a(Q),d(C,Q),ka(),Re()}fa(["click","keydown"]);export{es as component,Ya as universal};
