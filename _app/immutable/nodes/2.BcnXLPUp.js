import{f as h,a as c,c as ra,e as ja,r as Pa}from"../chunks/DHhKP1ZB.js";import{p as Ra,a as D,b as ia,o as Sa,c as Ga,s as w,g as a,f as s,i as e,j as N,k as i,l as L,v as B,w as Da}from"../chunks/Bub3oN-q.js";import{s as g}from"../chunks/BvDuh9Sl.js";import{i as x}from"../chunks/Dt9r8Ad9.js";import{e as La,s as Aa,i as Ma}from"../chunks/D2Qmw1Ht.js";import{s as b}from"../chunks/IihZ9c6f.js";import{b as $}from"../chunks/CAxi6s8j.js";import"../chunks/BcOnVHmO.js";var qa=h('<div class="loading svelte-1uha8ag"><div class="loader svelte-1uha8ag"></div> <p>Loading profile...</p></div>'),Ba=h('<div class="link-card error-card svelte-1uha8ag"><div class="card-icon svelte-1uha8ag">âš ï¸</div> <h2 class="svelte-1uha8ag">Setup Required</h2> <p class="svelte-1uha8ag"> </p></div>'),Fa=h('<div class="linktree-stats svelte-1uha8ag"><div class="stat-item svelte-1uha8ag"><span class="stat-num svelte-1uha8ag"> </span> <span class="stat-label svelte-1uha8ag">Games</span></div> <div class="stat-divider svelte-1uha8ag"></div> <div class="stat-item svelte-1uha8ag"><span class="stat-num svelte-1uha8ag"> </span> <span class="stat-label svelte-1uha8ag">Played</span></div></div>'),Ta=h('<div class="achievement-progress svelte-1uha8ag"><div class="progress-bar-mini svelte-1uha8ag"><div class="progress-fill-mini svelte-1uha8ag"></div></div> <span class="progress-text-mini svelte-1uha8ag"> </span></div>'),Ua=h('<a class="game-link-card svelte-1uha8ag"><div class="game-thumb svelte-1uha8ag"><img class="svelte-1uha8ag"/></div> <div class="game-link-info svelte-1uha8ag"><h3 class="svelte-1uha8ag"> </h3> <p class="svelte-1uha8ag"> </p> <!></div> <span class="link-arrow svelte-1uha8ag">â†’</span></a>'),Va=h('<div class="linktree-section svelte-1uha8ag"><h2 class="section-title svelte-1uha8ag">Recently Played</h2> <div class="recent-cards svelte-1uha8ag"></div></div>'),za=h('<div class="linktree-footer svelte-1uha8ag"><p> </p></div>'),Ca=h('<div class="linktree-profile svelte-1uha8ag"><div class="profile-avatar svelte-1uha8ag"><img class="svelte-1uha8ag"/></div> <h1 class="profile-name svelte-1uha8ag"> </h1> <p class="profile-subtitle svelte-1uha8ag">ğŸ® Steam Gaming Profile</p></div> <!> <div class="linktree-links svelte-1uha8ag"><a class="link-card svelte-1uha8ag"><span class="link-icon svelte-1uha8ag">ğŸ®</span> <span class="link-text svelte-1uha8ag">Browse Game Library</span> <span class="link-arrow svelte-1uha8ag">â†’</span></a> <a target="_blank" class="link-card svelte-1uha8ag"><span class="link-icon svelte-1uha8ag">ğŸ”—</span> <span class="link-text svelte-1uha8ag">Visit Steam Profile</span> <span class="link-arrow svelte-1uha8ag">â†—</span></a></div> <!> <!>',1),Ea=h('<div class="linktree-container svelte-1uha8ag"><!></div>');function Xa(la,va){Ra(va,!0);let j=D(null),P=D(null),q=D(ia([])),O=D(ia({})),F=D(!0),T=D("");Sa(async()=>{try{const t=await fetch(`${$}/api/profile.json`);t.ok&&w(j,await t.json(),!0);const r=await fetch(`${$}/api/summary.json`);r.ok&&w(P,await r.json(),!0);const m=await fetch(`${$}/history/stats/recent-latest.json`);if(m.ok){const f=await m.json();w(q,f.games||[],!0);const A=a(q).slice(0,3).map(async l=>{try{const _=await fetch(`${$}/history/achievements/${l.appid}.json`);if(_.ok){const M=await _.json();return{appid:l.appid.toString(),data:M}}}catch{}return null}),u=await Promise.all(A),d={};for(const l of u)l&&(d[l.appid]=l.data);w(O,d,!0)}w(F,!1)}catch{w(T,"Failed to load profile data. Please ensure initial sync has been run."),w(F,!1)}});function Q(t){const r=a(O)[t.toString()];if(!r||!r.achievements)return null;const m=r.achievements.filter(A=>A.achieved===1).length,f=r.achievements.length;return{achieved:m,total:f,percentage:f>0?m/f*100:0}}function na(t){return new Date(t).toLocaleString()}function oa(t){const r=Math.round(t/60);return r<1?`${t}m`:`${r}h`}var U=Ea(),ca=s(U);{var da=t=>{var r=qa();c(t,r)},pa=t=>{var r=ra(),m=N(r);{var f=u=>{var d=Ba(),l=i(s(d),4),_=s(l,!0);e(l),e(d),L(()=>g(_,a(T))),c(u,d)},A=u=>{var d=ra(),l=N(d);{var _=M=>{var W=Ca(),V=N(W),z=s(V),X=s(z);e(z);var Y=i(z,2),ha=s(Y,!0);e(Y),B(2),e(V);var Z=i(V,2);{var ua=v=>{var n=Fa(),p=s(n),R=s(p),o=s(R,!0);e(R),B(2),e(p);var k=i(p,4),S=s(k),G=s(S);e(S),B(2),e(k),e(n),L(()=>{g(o,a(P).stats.totalGames),g(G,`${a(P).stats.totalPlaytime??""}h`)}),c(v,n)};x(Z,v=>{a(P)&&v(ua)})}var C=i(Z,2),aa=s(C),ga=i(aa,2);e(C);var ea=i(C,2);{var ma=v=>{var n=Va(),p=i(s(n),2);La(p,21,()=>a(q).slice(0,3),Ma,(R,o)=>{var k=Ua(),S=s(k),G=s(S);e(S);var sa=i(S,2),E=s(sa),ka=s(E,!0);e(E);var H=i(E,2),ya=s(H);e(H);var wa=i(H,2);{var xa=y=>{const I=Da(()=>Q(a(o).appid));var J=Ta(),K=s(J),ba=s(K);e(K);var ta=i(K,2),$a=s(ta);e(ta),e(J),L(()=>{Aa(ba,`width: ${a(I).percentage??""}%`),g($a,`ğŸ† ${a(I).achieved??""}/${a(I).total??""}`)}),c(y,J)};x(wa,y=>{Q(a(o).appid)&&y(xa)})}e(sa),B(2),e(k),L(y=>{b(k,"href",`${$??""}/game/${a(o).appid??""}/`),b(G,"src",`${$??""}/covers/${a(o).appid??""}.jpg`),b(G,"alt",a(o).name),g(ka,a(o).name),g(ya,`${y??""} played`)},[()=>oa(a(o).playtime_forever||0)]),ja("error",G,y=>y.currentTarget.style.opacity="0"),Pa(G),c(R,k)}),e(p),e(n),c(v,n)};x(ea,v=>{a(q).length>0&&v(ma)})}var fa=i(ea,2);{var _a=v=>{var n=za(),p=s(n),R=s(p);e(p),e(n),L(o=>g(R,`Last updated ${o??""}`),[()=>na(a(P).lastUpdate)]),c(v,n)};x(fa,v=>{a(P)&&v(_a)})}L(()=>{b(X,"src",a(j).avatarfull),b(X,"alt",a(j).personaname),g(ha,a(j).personaname),b(aa,"href",`${$??""}/games/1/`),b(ga,"href",a(j).profileurl)}),c(M,W)};x(l,M=>{a(j)&&M(_)},!0)}c(u,d)};x(m,u=>{a(T)?u(f):u(A,!1)},!0)}c(t,r)};x(ca,t=>{a(F)?t(da):t(pa,!1)})}e(U),c(la,U),Ga()}export{Xa as component};
